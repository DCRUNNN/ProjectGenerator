{"version":3,"sources":["webpack:///./src/api/customer.js","webpack:///./src/api/project.js","webpack:///./src/views/customer/invest/components/investDetail.vue?7b6c","webpack:///./src/views/customer/invest/components/investDetail.vue?0e88","webpack:///src/views/customer/invest/components/investDetail.vue","webpack:///./src/views/customer/invest/components/investDetail.vue?ddfa","webpack:///./src/views/customer/invest/components/investDetail.vue","webpack:///./src/api/projectCustomer.js","webpack:///./src/views/customer/invest/editInvest.vue?74b6","webpack:///src/views/customer/invest/editInvest.vue","webpack:///./src/views/customer/invest/editInvest.vue","webpack:///./src/views/customer/invest/editInvest.vue?0425"],"names":["__webpack_require__","d","__webpack_exports__","getAllCustomers","addCustomer","updateCustomer","deleteCustomer","_utils_request__WEBPACK_IMPORTED_MODULE_0__","params","request","url","method","customer","data","customerId","getAllProjects","getProjectById","getProjectDetailById","addProject","updateProject","deleteProject","deleteRateRange","getRateRange","projectId","project","rateRangeId","investMoney","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_6_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_2_node_modules_vue_loader_lib_index_js_vue_loader_options_investDetail_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","n","a","WlOQ","t","e","r","o","s","i","c","u","defaultForm","id","phase","customerIdCard","investTime","rate","components_investDetailvue_type_script_lang_js_","name","components","props","isEdit","type","Boolean","default","watch","investForm.customerId","handler","newVal","oldVal","this","getCustomerInvestProjectList","selectedCustomer","allCustomerList","find","x","investForm","idCard","deep","investForm.projectId","investForm.investMoney","allProjectList","customerInvestProjectList","assign_default","btnLoading","rules","required","message","trigger","created","hasPermission","getAllProjectsList","getAllCustomersList","methods","_this","Object","then","response","temp","forEach","disabled","_this2","list","_this3","projectCustomer","b","_loop","investedProject","length","addProjectCustomer","form","_this4","returnCode","$message","success","error","submitForm","_this5","$refs","validate","valid","console","resetForm","formName","resetFields","_this6","is_integer_default","g","m","component","componentNormalizer","_vm","_h","$createElement","_c","_self","attrs","span","offset","shadow","staticClass","slot","_v","to","staticStyle","float","padding","size","icon","ref","model","label-width","label","prop","width","filterable","placeholder","value","callback","$$v","$set","expression","_l","item","key","customerName","_s","color","font-size","readonly","projectName","clearable","_n","align","value-format","format","effect","domProps","textContent","on","click","$event","loading","getInvestCustomersByProjectId","getCustomersInProjectPhase","getCustomerInvestProject","invest_editInvestvue_type_script_lang_js_","msg","is-edit"],"mappings":"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","file":"static/js/15.6eccc0a9bbe6223d819b.js","sourcesContent":["import request from '@/utils/request'\n\nexport function getAllCustomers(params) {\n  return request({\n    url: '/customer/listAllCustomers',\n    method: 'get',\n    params\n  })\n}\n\nexport function addCustomer(customer) {\n  return request({\n    url: '/customer/insert',\n    method: 'post',\n    data: customer\n  })\n}\n\nexport function updateCustomer(customer) {\n  return request({\n    url: '/customer/update',\n    method: 'post',\n    data: customer\n  })\n}\n\nexport function deleteCustomer(customerId) {\n  return request({\n    url: '/customer/deleteCustomerById',\n    method: 'get',\n    params: {customerId}\n  })\n}\n","import request from '@/utils/request'\n\nexport function getAllProjects() {\n  return request({\n    url: '/project/getAllProjects',\n    method: 'get'\n  })\n}\n\nexport function getProjectById(projectId) {\n  return request({\n    url: '/project/getProjectById',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function getProjectDetailById(projectId) {\n  return request({\n    url: '/project/getProjectDetailById',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function addProject(project) {\n  return request({\n    url: '/project/insert',\n    method: 'post',\n    data: project\n  })\n}\n\nexport function updateProject(project) {\n  return request({\n    url: '/project/update',\n    method: 'post',\n    data: project\n  })\n}\n\nexport function deleteProject(projectId) {\n  return request({\n    url: '/project/deleteProjectById',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function deleteRateRange(rateRangeId) {\n  return request({\n    url: '/rateRange/deleteRateRange',\n    method: 'get',\n    params: {rateRangeId}\n  })\n}\n\nexport function getRateRange(projectId,investMoney) {\n  return request({\n    url: '/rateRange/getRateRange',\n    method: 'get',\n    params: {projectId,investMoney}\n  })\n}\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js??ref--6-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./investDetail.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js??ref--6-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./investDetail.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{attrs:{\"span\":18,\"offset\":3}},[_c('el-card',{attrs:{\"shadow\":\"hover\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"客户投资\")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":'/customer/index'}},[_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"8px 10px\"},attrs:{\"type\":\"info\",\"size\":\"small\",\"icon\":\"el-icon-back\"}},[_vm._v(\"返回客户列表\")])],1)],1),_vm._v(\" \"),_c('el-form',{ref:\"investForm\",attrs:{\"model\":_vm.investForm,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"投资人\",\"prop\":\"customerId\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.investForm.customerId),callback:function ($$v) {_vm.$set(_vm.investForm, \"customerId\", $$v)},expression:\"investForm.customerId\"}},_vm._l((_vm.allCustomerList),function(item){return _c('el-option',{key:item.customerId,attrs:{\"label\":item.customerName,\"value\":item.customerId}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.customerName))]),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(item.idCard))])])}),1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"投资人身份证件号\",\"prop\":\"customerIdCard\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{attrs:{\"readonly\":true},model:{value:(_vm.investForm.customerIdCard),callback:function ($$v) {_vm.$set(_vm.investForm, \"customerIdCard\", $$v)},expression:\"investForm.customerIdCard\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"投资项目\",\"prop\":\"projectId\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.investForm.projectId),callback:function ($$v) {_vm.$set(_vm.investForm, \"projectId\", $$v)},expression:\"investForm.projectId\"}},_vm._l((_vm.allProjectList),function(item){return _c('el-option',{key:item.projectId,attrs:{\"disabled\":item.disabled,\"label\":item.projectName,\"value\":item.projectId}})}),1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"投资金额\",\"prop\":\"investMoney\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.investForm.investMoney),callback:function ($$v) {_vm.$set(_vm.investForm, \"investMoney\", _vm._n($$v))},expression:\"investForm.investMoney\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"打款时间\",\"prop\":\"investTime\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('div',{staticClass:\"block\"},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"选择日期时间\",\"align\":\"right\",\"value-format\":\"yyyy-MM-dd\",\"format\":\"yyyy-MM-dd\"},model:{value:(_vm.investForm.investTime),callback:function ($$v) {_vm.$set(_vm.investForm, \"investTime\", $$v)},expression:\"investForm.investTime\"}})],1)])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"利率\"}},[_c('el-tag',{attrs:{\"effect\":\"dark\"},domProps:{\"textContent\":_vm._s(_vm.investForm.rate)},model:{value:(_vm.investForm.rate),callback:function ($$v) {_vm.$set(_vm.investForm, \"rate\", $$v)},expression:\"investForm.rate\"}})],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form-item',[_c('el-row',[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-refresh\"},on:{\"click\":function($event){return _vm.resetForm('investForm')}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-success\",\"loading\":_vm.btnLoading},on:{\"click\":function($event){return _vm.submitForm('addProjectCustomer')}}},[_vm._v(\"保存\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-row>\n    <el-col :span=\"18\" :offset=\"3\">\n      <el-card shadow=\"hover\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>客户投资</span>\n          <router-link :to=\"'/customer/index'\">\n            <el-button type=\"info\" size=\"small\" style=\"float:right; padding: 8px 10px\" icon=\"el-icon-back\">返回客户列表</el-button>\n          </router-link>\n        </div>\n        <el-form :model=\"investForm\" :rules=\"rules\" ref=\"investForm\" label-width=\"150px\">\n          <el-form-item label=\"投资人\" prop=\"customerId\">\n            <el-col :span=\"20\">\n              <el-select style=\"width:100%\" v-model=\"investForm.customerId\" filterable placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in allCustomerList\"\n                  :key=\"item.customerId\"\n                  :label=\"item.customerName\"\n                  :value=\"item.customerId\">\n                  <span style=\"float: left\">{{ item.customerName }}</span>\n                  <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.idCard }}</span>\n                </el-option>\n              </el-select>\n            </el-col>\n          </el-form-item>\n          <el-form-item label=\"投资人身份证件号\" prop=\"customerIdCard\">\n            <el-col :span=\"20\">\n              <el-input v-model=\"investForm.customerIdCard\" :readonly=true></el-input>\n            </el-col>\n          </el-form-item>\n          <el-form-item label=\"投资项目\" prop=\"projectId\">\n            <el-col :span=\"20\">\n              <el-select style=\"width:100%\" v-model=\"investForm.projectId\" filterable placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in allProjectList\"\n                  :key=\"item.projectId\"\n                  :disabled=\"item.disabled\"\n                  :label=\"item.projectName\"\n                  :value=\"item.projectId\">\n                </el-option>\n              </el-select>\n            </el-col>\n          </el-form-item>\n          <el-form-item label=\"投资金额\" prop=\"investMoney\">\n            <el-col :span=\"20\">\n              <el-input v-model.number=\"investForm.investMoney\" clearable></el-input>\n            </el-col>\n          </el-form-item>\n          <el-form-item label=\"打款时间\" prop=\"investTime\">\n            <el-col :span=\"20\">\n              <div class=\"block\">\n                <el-date-picker style=\"width:100%\"\n                  v-model=\"investForm.investTime\"\n                  type=\"date\"\n                  placeholder=\"选择日期时间\"\n                  align=\"right\"\n                  value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\">\n                </el-date-picker>\n              </div>\n            </el-col>\n          </el-form-item>\n          <el-form-item label=\"利率\">\n            <el-tag effect=\"dark\" v-model=\"investForm.rate\" v-text=\"investForm.rate\"></el-tag>\n          </el-form-item>\n          <br>\n          <el-form-item>\n            <el-row>\n              <el-button type=\"warning\" icon=\"el-icon-refresh\" @click=\"resetForm('investForm')\">重置</el-button>\n              <el-button type=\"primary\" icon=\"el-icon-success\" :loading=\"btnLoading\" @click=\"submitForm('addProjectCustomer')\">保存</el-button>\n            </el-row>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\n  import { getAllCustomers } from '@/api/customer'\n  import { addProjectCustomer, getCustomerInvestProject } from '@/api/projectCustomer'\n  import { getAllProjects, getRateRange } from '@/api/project'\n\n  const defaultForm = {\n    id:'',\n    customerId:'',\n    projectId:'',\n    phase:-1,\n    customerIdCard:'',\n    investMoney:'',\n    investTime:'',\n    rate:'',\n  };\n\n  export default {\n    name: 'ProjectCustomerDetail',\n    components: {},\n    props: {\n      isEdit: {\n        type: Boolean,\n        default: false\n      }\n    },\n    watch:{\n      'investForm.customerId':{\n        handler(newVal, oldVal) {\n          if (newVal) {\n            this.getCustomerInvestProjectList(newVal);\n            let tempArray = this.allCustomerList;\n            let selectedCustomer = tempArray.find(function (x) {\n              return x.customerId === newVal\n            });\n            this.investForm.customerIdCard = selectedCustomer.idCard;\n          }\n        },\n        deep: true\n      },\n      'investForm.projectId':{\n        handler(newVal, oldVal) {\n          this.getRateRange();\n        },\n        deep: true\n      },\n      'investForm.investMoney':{\n        handler(newVal, oldVal) {\n          this.getRateRange();\n        },\n        deep: true\n      },\n    },\n    data() {\n      return {\n        allProjectList: [],\n        allCustomerList: [],\n        customerInvestProjectList: [],\n        investForm: Object.assign({}, defaultForm),\n        btnLoading: false,\n        rules: {\n          customerId: [\n            { required: true, message: '请选择投资人', trigger: 'blur' }\n          ],\n          customerIdCard: [\n            { required: true, message: '若投资人身份证号为空，请联系管理员', trigger: 'blur' }\n          ],\n          projectId: [\n            { required: true, message: '请选择投资项目', trigger: 'blur' }\n          ],\n          investMoney: [\n            { required: true, message: '请输入投资金额', trigger: 'blur' },\n            { type: 'number', message: '投资金额必须为数字值'}\n          ],\n          investTime: [\n            { required: true, message: '请选择投资时间', trigger: 'blur' }\n          ]\n        },\n      }\n    },\n    created() {\n      if (this.hasPermission('project:list')) {\n        if (this.isEdit) {\n          // TODO\n        } else {\n          this.investForm = Object.assign({}, defaultForm);\n          this.getAllProjectsList();\n          this.getAllCustomersList();\n        }\n      }\n    },\n    methods: {\n      getAllProjectsList() {\n        getAllProjects().then(response => {\n          let temp = response.data;\n          temp.forEach(project => project.disabled = false);\n          this.allProjectList = temp;\n        })\n      },\n      getAllCustomersList(){\n        getAllCustomers().then(response => {\n          this.allCustomerList = response.data.list\n        })\n      },\n      getCustomerInvestProjectList(){\n        this.allProjectList.forEach(project => project.disabled = false);\n          getCustomerInvestProject(this.investForm.customerId).then(response =>{\n            this.customerInvestProjectList = response.data;\n            for (let i = 0; i < this.allProjectList.length; i++) {\n              this.customerInvestProjectList.forEach(investedProject =>{\n                if (investedProject.projectId === this.allProjectList[i].projectId) {\n                  this.allProjectList[i].disabled = true;\n                }\n              })\n            }\n          })\n      },\n      addProjectCustomer(form){\n        this.btnLoading = true;\n        addProjectCustomer(form).then((response) => {\n          if(response.returnCode === 200) {\n            this.$message.success('客户投资信息已录入');\n            this.btnLoading = false;\n          }else{\n            this.$message.error('客户投资信息录入失败');\n            this.btnLoading = false;\n          }\n        })\n      },\n      submitForm() {\n        this.$refs.investForm.validate(valid => {\n          if (valid) {\n            if(this.isEdit) {\n              // TODO\n            }else{\n              this.addProjectCustomer(this.investForm);\n            }\n          } else {\n            console.error('error submit!!');\n            return false;\n          }\n        })\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n        this.investForm.rate = '';\n      },\n\n      getRateRange(){\n        let projectId = this.investForm.projectId;\n        let investMoney = this.investForm.investMoney;\n        if(projectId != '' && investMoney != ''){\n          if (Number.isInteger(investMoney)) {\n            getRateRange(projectId,investMoney).then(response =>{\n              if (!response.data) {\n                this.investForm.rate = '投资金额不在该项目的利息区间内'\n              }else{\n                this.investForm.rate = response.data;\n              }\n            })\n          }else{\n            this.$message.error(\"投资金额必须为数字\");\n          }\n        }\n      }\n    }\n  };\n</script>\n\n<style>\n\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n  .clearfix:after {\n    clear: both\n  }\n\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./investDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./investDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./investDetail.vue?vue&type=template&id=11b86188&\"\nimport script from \"./investDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./investDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./investDetail.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\nexport function addProjectCustomer(projectCustomer) {\n  return request({\n    url: '/projectCustomer/insert',\n    method: 'post',\n    data: projectCustomer\n  })\n}\n\nexport function getInvestCustomersByProjectId(projectId) {\n  return request({\n    url: '/projectCustomer/getInvestCustomersByProjectId',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function getCustomersInProjectPhase(projectId,phase) {\n  return request({\n    url: '/projectCustomer/getCustomersInProjectPhase',\n    method: 'get',\n    params: {projectId,phase}\n  })\n}\n\nexport function getCustomerInvestProject(customerId) {\n  return request({\n    url: '/projectCustomer/getCustomerInvestProject',\n    method: 'get',\n    params: {customerId}\n  })\n}\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('invest-detail',{attrs:{\"is-edit\":true}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <invest-detail :is-edit=\"true\"/>\n    </div>\n  </div>\n</template>\n\n<style>\n\n</style>\n\n<script>\n  import InvestDetail from './components/investDetail.vue'\n\n  export default {\n    data() {\n      return {msg: 'Hello Vue'}\n    }\n  }\n</script>\n","import { render, staticRenderFns } from \"./editInvest.vue?vue&type=template&id=8800a8ec&\"\nimport script from \"./editInvest.vue?vue&type=script&lang=js&\"\nexport * from \"./editInvest.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editInvest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editInvest.vue?vue&type=script&lang=js&\""],"sourceRoot":""}