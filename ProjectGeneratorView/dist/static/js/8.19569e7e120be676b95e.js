(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{P14b:function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var i=n("t3Un");function o(e){return Object(i.a)({url:"/file/uploadFile",method:"post",data:e})}function l(e){return Object(i.a)({url:"/file/uploadMultipleFiles",method:"post",data:e})}function r(){return Object(i.a)({url:"/file/getAllFileList",method:"get"})}function a(e){return Object(i.a)({url:"/file/downloadFile/",method:"get",params:{fileName:e},responseType:"blob"})}function s(e){return Object(i.a)({url:"/file/deleteFile/",method:"get",params:{fileName:e}})}},lx1u:function(e,t,n){"use strict";var i=n("mUpt");n.n(i).a},mUpt:function(e,t,n){},v3tY:function(e,t,n){"use strict";n.r(t);var i=n("P14b"),o=(n("L2JU"),{components:{},name:"FileList",data:function(){return{search:"",fileList:[],listLoading:!1,btnLoading:!1,readonly:!1}},created:function(){this.hasPermission("file:list")&&this.getAllFilesList()},methods:{refresh:function(){this.getAllFilesList(),this.$message.success("已是最新")},getAllFilesList:function(){var e=this;this.listLoading=!0,Object(i.c)().then(function(t){e.fileList=t.data,e.listLoading=!1})},downloadFile:function(e){var t=this;this.btnLoading=!0,Object(i.b)(e).then(function(n){var i=new Blob([n]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(i,e),t.btnLoading=!1;else{var o=document.createElement("a");document.createEvent("HTMLEvents").initEvent("click",!1,!1),o.href=URL.createObjectURL(i),o.download=e,o.style.display="none",document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(o.href),t.btnLoading=!1}}).catch(function(e){t.$message.error("无法下载文件"),console.error(e)})},deleteFile:function(e){var t=this;this.$confirm("您确认要删除 "+e+" 文件吗?","Warning",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.a)(e).then(function(e){200===e.returnCode?(t.$message.success("删除文件成功！"),t.getAllFilesList()):(t.$message.error("删除文件失败"),t.getAllFilesList(),console.error(e))}).catch(function(e){t.$message.error("删除文件失败"),console.error(e)})})}}}),l=(n("lx1u"),n("KHd+")),r=Object(l.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-form",[n("el-form-item",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[e.hasPermission("file:list")?n("el-button",{attrs:{type:"success",icon:"el-icon-refresh"},nativeOn:{click:function(t){return t.preventDefault(),e.refresh(t)}}},[e._v("刷新\n            ")]):e._e(),e._v(" "),n("router-link",{attrs:{to:"/file/upload/"}},[e.hasPermission("file:upload")?n("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"}},[e._v("上传\n              ")]):e._e()],1)],1),e._v(" "),n("el-col",{attrs:{span:8,offset:10}},[n("el-input",{attrs:{size:"medium",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.fileList.filter(function(t){return!e.search||t.fileName.toLowerCase().includes(e.search.toLowerCase())||t.fileType.includes(e.search)||t.lastModifyTime.includes(e.search)||t.fileDownloadUri.includes(e.search)}),"element-loading-text":"全力加载中...","default-sort":{prop:"date",order:"descending"},border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"文件名","min-width":"80&",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(t.row.fileName)}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"文件类型",align:"center","min-width":"40%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(t.row.fileType)}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"文件大小",align:"center","min-width":"40%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(t.row.size+" B")}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最后修改时间",align:"center","min-width":"60%",prod:"date",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(t.row.lastModifyTime)}})]}}])}),e._v(" "),e.hasPermission("file:download")||e.hasPermission("file:delete")?n("el-table-column",{attrs:{label:"操作","min-width":"60%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("file:download")?n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-download",loading:e.btnLoading},nativeOn:{click:function(n){return n.preventDefault(),e.downloadFile(t.row.fileName)}}},[e._v("下载\n        ")]):e._e(),e._v(" "),e.hasPermission("file:delete")?n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteFile(t.row.fileName)}}},[e._v("删除\n        ")]):e._e()]}}])}):e._e()],1)],1)},[],!1,null,"129a3b48",null);t.default=r.exports}}]);
//# sourceMappingURL=8.19569e7e120be676b95e.js.map