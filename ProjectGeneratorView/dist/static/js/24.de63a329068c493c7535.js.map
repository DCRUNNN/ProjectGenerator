{"version":3,"sources":["webpack:///./src/utils/validate.js","webpack:///./src/views/role/index.vue?8243","webpack:///./src/views/role/index.vue?2a83","webpack:///src/views/role/index.vue","webpack:///./src/api/role.js","webpack:///./src/views/role/index.vue"],"names":["isValidateRoleName","roleName","test","isValidatePhoneNumber","phoneNumber","isValidateBankAccount","bankAccount","isValidateIdCard","idCard","__webpack_require__","d","__webpack_exports__","n","i","s","o","l","a","views_rolevue_type_script_lang_js_","created","this","hasPermission","getAllPermission","getRoleList","data","roleList","allPermission","listLoading","total","listQuery","page","size","dialogStatus","dialogFormVisible","textMap","update","add","btnLoading","tempRole","id","name","permissionIdList","createRules","required","trigger","validator","rule","value","callback","Object","validate","Error","computed","extends_default","vuex_esm","b","methods","_this","request","url","method","params","then","response","list","_this2","handleSizeChange","handleCurrentChange","getTableIndex","index","showAddRoleDialog","showUpdateRoleDialog","role","resourceList","length","handleList","j","handle","push","addRole","_this3","$refs","valid","roleForm","isRoleNameUnique","$message","success","console","log","updateRole","_this4","error","removeRole","_this5","$confirm","confirmButtonText","cancelButtonText","showCancelButton","type","roleId","isMenuNone","indexOf","isMenuAll","checkAll","cancelAll","selectAll","addUnique","idIndex","splice","handleChecked","item","makePermissionChecked","val","arr","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","icon","nativeOn","click","$event","preventDefault","_v","_e","directives","rawName","expression","modifiers","body","element-loading-text","border","fit","highlight-current-row","label","align","width","scopedSlots","_u","key","fn","scope","domProps","textContent","_s","$index","prop","row","_l","staticStyle","margin-right","resource","item2","on","current-page","page-size","page-sizes","layout","size-change","current-change","title","visible","update:visible","ref","margin-left","status-icon","label-position","label-width","model","rules","prefix-icon","auto-complete","$$v","$set","permission","change","_index","slot","loading","default"],"mappings":"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","file":"static/js/24.de63a329068c493c7535.js","sourcesContent":["/**\n * url地址\n * @param url\n * @returns {boolean}\n */\nexport function isValidateURL(url) {\n  const reg = /^(https?|ftp):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/\n  return reg.test(url)\n}\n\n/**\n * 小写字母\n * @param str\n * @returns {boolean}\n */\nexport function isValidateLowerCase(str) {\n  const reg = /^[a-z]+$/\n  return reg.test(str)\n}\n\n/**\n * 大写字母\n * @param str\n * @returns {boolean}\n */\nexport function isValidateUpperCase(str) {\n  const reg = /^[A-Z]+$/\n  return reg.test(str)\n}\n\n/**\n * 大小写字母\n * @param str\n * @returns {boolean}\n */\nexport function isValidateAlphabets(str) {\n  const reg = /^[A-Za-z]+$/\n  return reg.test(str)\n}\n\n/**\n * 邮箱\n * @param email\n * @returns {boolean}\n */\nexport function isValidateEmail(email) {\n  const reg = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n  return reg.test(email)\n}\n\n/**\n * 角色名\n * @param roleName\n * @returns {boolean}\n */\nexport function isValidateRoleName(roleName) {\n  const reg = /^ROLE_[A-Z]+$/\n  return reg.test(roleName)\n}\n\n/**\n *  验证电话号码\n * @param phoneNumber\n * @returns {boolean}\n */\nexport function isValidatePhoneNumber(phoneNumber) {\n  // const reg = /^1(3|4|5|7|8)\\d{9}$/\n  // return reg.test(phoneNumber)\n  return true;\n}\n\n/**\n *  验证银行账号\n * @param bankAccount\n * @returns {boolean}\n */\nexport function isValidateBankAccount(bankAccount) {\n  // const reg = /^1(3|4|5|7|8)\\d{9}$/\n  // return reg.test(phoneNumber)\n  return true\n}\n\n/**\n *  验证身份证号\n * @param idCard\n * @returns {boolean}\n */\nexport function isValidateIdCard(idCard) {\n  const reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\n  return reg.test(idCard);\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-form',[_c('el-form-item',[(_vm.hasPermission('role:list'))?_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-refresh\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.getRoleList($event)}}},[_vm._v(\"refresh\\n        \")]):_vm._e(),_vm._v(\" \"),(_vm.hasPermission('role:add'))?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.showAddRoleDialog($event)}}},[_vm._v(\"add\\n        \")]):_vm._e()],1)],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading.body\",value:(_vm.listLoading),expression:\"listLoading\",modifiers:{\"body\":true}}],attrs:{\"data\":_vm.roleList,\"element-loading-text\":\"loading\",\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"#\",\"align\":\"center\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{domProps:{\"textContent\":_vm._s(_vm.getTableIndex(scope.$index))}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Role Name\",\"align\":\"center\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Permission\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.name === 'ROLE_ADMIN')?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"all\\n        \")]):(scope.row.resourceList.length === 0)?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"none\\n        \")]):_vm._l((scope.row.resourceList),function(item){return _c('div',[_c('span',{staticStyle:{\"margin-right\":\"3px\"}},[_vm._v(_vm._s(item.resource))]),_vm._v(\" \"),_vm._l((item.handleList),function(item2){return _c('span',{staticStyle:{\"margin-right\":\"3px\"}},[_c('el-tag',{attrs:{\"type\":\"success\"},domProps:{\"textContent\":_vm._s(item2.handle)}})],1)})],2)})]}}])}),_vm._v(\" \"),(_vm.hasPermission('role:update') || _vm.hasPermission('role:delete'))?_c('el-table-column',{attrs:{\"label\":\"Admin\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.hasPermission('role:update') && scope.row.name !== 'ROLE_ADMIN')?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit-outline\"},on:{\"click\":function($event){return _vm.showUpdateRoleDialog(scope.$index)}}},[_vm._v(\"update\\n        \")]):_vm._e(),_vm._v(\" \"),(_vm.hasPermission('role:delete') && scope.row.name !== 'ROLE_ADMIN')?_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.removeRole(scope.$index)}}},[_vm._v(\"delete\\n        \")]):_vm._e()]}}])}):_vm._e()],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.listQuery.page,\"page-size\":_vm.listQuery.size,\"total\":_vm.total,\"page-sizes\":[10, 30, 50, 100],\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.textMap[_vm.dialogStatus],\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"tempRole\",staticClass:\"small-space\",staticStyle:{\"width\":\"500px\",\"margin-left\":\"50px\"},attrs:{\"status-icon\":\"\",\"label-position\":\"left\",\"label-width\":\"100px\",\"model\":_vm.tempRole,\"rules\":_vm.createRules}},[_c('el-form-item',{attrs:{\"label\":\"Role name\",\"prop\":\"name\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"prefix-icon\":\"el-icon-edit\",\"auto-complete\":\"off\"},model:{value:(_vm.tempRole.name),callback:function ($$v) {_vm.$set(_vm.tempRole, \"name\", $$v)},expression:\"tempRole.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Permission\",\"required\":\"\"}},_vm._l((_vm.allPermission),function(permission,index){return _c('div',[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":_vm.isMenuNone(index) ? '' : (_vm.isMenuAll(index) ? 'success' : 'primary')},on:{\"click\":function($event){return _vm.checkAll(index)}}},[_vm._v(_vm._s(permission.resource)+\"\\n          \")]),_vm._v(\" \"),_c('el-checkbox-group',{model:{value:(_vm.tempRole.permissionIdList),callback:function ($$v) {_vm.$set(_vm.tempRole, \"permissionIdList\", $$v)},expression:\"tempRole.permissionIdList\"}},_vm._l((permission.handleList),function(item){return _c('el-checkbox',{key:item.id,attrs:{\"label\":item.id},on:{\"change\":function($event){return _vm.handleChecked(item, _vm._index)}}},[_c('span',[_vm._v(_vm._s(item.handle))])])}),1)],1)}),0)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"cancel\")]),_vm._v(\" \"),(_vm.dialogStatus === 'add')?_c('el-button',{attrs:{\"type\":\"success\",\"loading\":_vm.btnLoading},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.addRole($event)}}},[_vm._v(\"add\\n      \")]):_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.updateRole($event)}}},[_vm._v(\"update\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-form>\n        <el-form-item>\n          <el-button type=\"success\" icon=\"el-icon-refresh\"\n                     v-if=\"hasPermission('role:list')\"\n                     @click.native.prevent=\"getRoleList\">refresh\n          </el-button>\n          <el-button type=\"primary\" icon=\"el-icon-plus\"\n                     v-if=\"hasPermission('role:add')\"\n                     @click.native.prevent=\"showAddRoleDialog\">add\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <el-table :data=\"roleList\"\n              v-loading.body=\"listLoading\"\n              element-loading-text=\"loading\"\n              border fit highlight-current-row>\n      <el-table-column label=\"#\" align=\"center\" width=\"80\">\n        <template slot-scope=\"scope\">\n          <span v-text=\"getTableIndex(scope.$index)\"></span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Role Name\" align=\"center\" prop=\"name\"/>\n      <el-table-column label=\"Permission\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag type=\"success\"\n                  v-if=\"scope.row.name === 'ROLE_ADMIN'\">all\n          </el-tag>\n          <el-tag type=\"success\"\n                  v-else-if=\"scope.row.resourceList.length === 0\">none\n          </el-tag>\n          <div v-else\n               v-for=\"item in scope.row.resourceList\">\n            <span style=\"margin-right: 3px;\">{{ item.resource }}</span>\n            <span style=\"margin-right: 3px;\"\n                  v-for=\"item2 in item.handleList\">\n              <el-tag type=\"success\"\n                      v-text=\"item2.handle\"/>\n            </span>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Admin\" align=\"center\"\n                       v-if=\"hasPermission('role:update') || hasPermission('role:delete')\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" icon=\"el-icon-edit-outline\"\n                     v-if=\"hasPermission('role:update') && scope.row.name !== 'ROLE_ADMIN'\"\n                     @click=\"showUpdateRoleDialog(scope.$index)\">update\n          </el-button>\n          <el-button type=\"danger\" icon=\"el-icon-delete\"\n                     v-if=\"hasPermission('role:delete') && scope.row.name !== 'ROLE_ADMIN'\"\n                     @click=\"removeRole(scope.$index)\">delete\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"listQuery.page\"\n      :page-size=\"listQuery.size\"\n      :total=\"total\"\n      :page-sizes=\"[10, 30, 50, 100]\"\n      layout=\"total, sizes, prev, pager, next, jumper\">\n    </el-pagination>\n    <el-dialog :title=\"textMap[dialogStatus]\"\n               :visible.sync=\"dialogFormVisible\">\n      <el-form status-icon class=\"small-space\" label-position=\"left\" label-width=\"100px\" style=\"width: 500px; margin-left:50px;\"\n               :model=\"tempRole\"\n               :rules=\"createRules\"\n               ref=\"tempRole\">\n        <el-form-item label=\"Role name\" prop=\"name\" required>\n          <el-input type=\"text\" prefix-icon=\"el-icon-edit\" auto-complete=\"off\"\n                    v-model=\"tempRole.name\">\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"Permission\" required>\n          <div v-for=\"(permission, index) in allPermission\">\n            <el-button size=\"mini\"\n                       :type=\"isMenuNone(index) ? '' : (isMenuAll(index) ? 'success' : 'primary')\"\n                       @click=\"checkAll(index)\">{{ permission.resource }}\n            </el-button>\n            <el-checkbox-group v-model=\"tempRole.permissionIdList\">\n              <el-checkbox v-for=\"item in permission.handleList\"\n                           :key=\"item.id\"\n                           :label=\"item.id\"\n                           @change=\"handleChecked(item, _index)\">\n                <span>{{ item.handle }}</span>\n              </el-checkbox>\n            </el-checkbox-group>\n          </div>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">cancel</el-button>\n        <el-button type=\"success\"\n                   v-if=\"dialogStatus === 'add'\"\n                   :loading=\"btnLoading\"\n                   @click.native.prevent=\"addRole\">add\n        </el-button>\n        <el-button type=\"primary\"\n                   v-else :loading=\"btnLoading\"\n                   @click.native.prevent=\"updateRole\">update\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n  import { list as getRoleList, listResourcePermission, add as addRole, update as updateRole, remove } from '@/api/role'\n  import { isValidateRoleName } from '@/utils/validate'\n  import { mapGetters } from 'vuex'\n\n  export default {\n    created() {\n      if (this.hasPermission('role:update')) {\n        this.getAllPermission()\n      }\n      if (this.hasPermission('role:list')) {\n        this.getRoleList()\n      }\n    },\n    data() {\n      /**\n       * 验证角色名\n       * @param rule 规则\n       * @param value 角色名\n       * @param callback 回调\n       */\n      const validateRoleName = (rule, value, callback) => {\n        if (!isValidateRoleName(value)) {\n          callback(new Error('role name format error. eg. ROLE_ABC'))\n        } else {\n          callback()\n        }\n      }\n      return {\n        roleList: [],\n        allPermission: [],\n        listLoading: false,\n        total: 0,\n        listQuery: {\n          page: 1,\n          size: 30\n        },\n        dialogStatus: 'add',\n        dialogFormVisible: false,\n        textMap: {\n          update: 'Update Role Permission',\n          add: 'Add Role'\n        },\n        btnLoading: false,\n        tempRole: {\n          id: '',\n          name: '',\n          permissionIdList: []\n        },\n        createRules: {\n          name: [{ required: true, trigger: 'blur', validator: validateRoleName }]\n        }\n      }\n    },\n    computed: {\n      ...mapGetters([\n        'roleName'\n      ])\n    },\n    methods: {\n      /**\n       * 获取所有角色权限\n       */\n      getAllPermission() {\n        listResourcePermission().then(response => {\n          this.allPermission = response.data.list\n        })\n      },\n      /**\n       * 获取角色列表\n       */\n      getRoleList() {\n        this.listLoading = true\n        getRoleList(this.listQuery).then(response => {\n          this.roleList = response.data.list\n          this.total = response.data.total\n          this.listLoading = false\n        })\n      },\n      /**\n       * 改变每页数量\n       * @param size 页大小\n       */\n      handleSizeChange(size) {\n        this.listQuery.page = 1\n        this.listQuery.size = size\n        this.getRoleList()\n      },\n      /**\n       * 改变页码\n       * @param page 页号\n       */\n      handleCurrentChange(page) {\n        this.listQuery.page = page\n        this.getRoleList()\n      },\n      /**\n       * 表格序号\n       * @param index 数据下标\n       * @returns 表格序号\n       */\n      getTableIndex(index) {\n        return (this.listQuery.page - 1) * this.listQuery.size + index + 1\n      },\n      /**\n       * 显示新增角色对话框\n       */\n      showAddRoleDialog() {\n        this.dialogFormVisible = true\n        this.dialogStatus = 'add'\n        this.tempRole.name = ''\n        this.tempRole.id = ''\n        this.tempRole.permissionIdList = []\n      },\n      /**\n       * 显示更新角色的对话框\n       * @param index 角色下标\n       */\n      showUpdateRoleDialog(index) {\n        this.dialogFormVisible = true\n        this.dialogStatus = 'update'\n        const role = this.roleList[index]\n        this.tempRole.name = role.name\n        this.tempRole.id = role.id\n        this.tempRole.permissionIdList = []\n        for (let i = 0; i < role.resourceList.length; i++) {\n          const handleList = role.resourceList[i].handleList\n          for (let j = 0; j < handleList.length; j++) {\n            const handle = handleList[j]\n            this.tempRole.permissionIdList.push(handle.id)\n          }\n        }\n      },\n      /**\n       * 添加新角色\n       */\n      addRole() {\n        this.$refs.tempRole.validate(valid => {\n          if (valid && this.isRoleNameUnique(this.tempRole.id, this.tempRole.name)) {\n            this.btnLoading = true\n            addRole(this.tempRole).then(() => {\n              this.$message.success('Add success')\n              this.getRoleList()\n              this.dialogFormVisible = false\n              this.btnLoading = false\n            })\n          } else {\n            console.log('form not validate')\n          }\n        })\n      },\n      /**\n       * 修改角色\n       */\n      updateRole() {\n        this.$refs.tempRole.validate(valid => {\n          if (valid && this.isRoleNameUnique(this.tempRole.id, this.tempRole.name)) {\n            this.btnLoading = true\n            updateRole(this.tempRole).then(() => {\n              this.$message.success('Update success')\n              this.getRoleList()\n              this.dialogFormVisible = false\n              this.btnLoading = false\n            })\n          } else {\n            console.log('form not validate')\n          }\n        })\n      },\n      /**\n       * 校验角色名是否已经存在\n       * @param id 角色id\n       * @param name 角色名\n       * @returns {boolean}\n       */\n      isRoleNameUnique(id, name) {\n        for (let i = 0; i < this.roleList.length; i++) {\n          if (this.roleList[i].id !== id && this.roleList[i].name === name) {\n            this.$message.error('Role name already existed')\n            return false\n          }\n        }\n        return true\n      },\n      /**\n       * 移除角色\n       * @param index 角色下标\n       * @returns {boolean}\n       */\n      removeRole(index) {\n        this.$confirm('Delete this role?', 'Waring', {\n          confirmButtonText: 'yes',\n          cancelButtonText: 'no',\n          showCancelButton: false,\n          type: 'warning'\n        }).then(() => {\n          const roleId = this.roleList[index].id\n          remove(roleId).then(() => {\n            this.$message.success('Delete success!')\n            this.getRoleList()\n          })\n        })\n      },\n      /**\n       * 判断角色菜单内的权限是否一个都没选\n       * @param index 下标\n       * @returns {boolean}\n       */\n      isMenuNone(index) {\n        const handleList = this.allPermission[index].handleList\n        for (let i = 0; i < handleList.length; i++) {\n          if (this.tempRole.permissionIdList.indexOf(handleList[i].id) > -1) {\n            return false\n          }\n        }\n        return true\n      },\n      /**\n       * 判断角色菜单内的权限是否全选了\n       * @param index 下标\n       * @returns {boolean}\n       */\n      isMenuAll(index) {\n        const handleList = this.allPermission[index].handleList\n        for (let i = 0; i < handleList.length; i++) {\n          if (this.tempRole.permissionIdList.indexOf(handleList[i].id) < 0) {\n            return false\n          }\n        }\n        return true\n      },\n      /**\n       * 根据菜单状态check所有checkbox\n       * @param index 下标\n       */\n      checkAll(index) {\n        if (this.isMenuAll(index)) {\n          // 如果已经全选了,则全部取消\n          this.cancelAll(index)\n        } else {\n          // 如果尚未全选,则全选\n          this.selectAll(index)\n        }\n      },\n      /**\n       * checkbox全部选中\n       * @param index 下标\n       */\n      selectAll(index) {\n        const handleList = this.allPermission[index].handleList\n        for (let i = 0; i < handleList.length; i++) {\n          this.addUnique(handleList[i].id, this.tempRole.permissionIdList)\n        }\n      },\n      /**\n       * checkbox全部取消选中\n       * @param index 下标\n       */\n      cancelAll(index) {\n        const handleList = this.allPermission[index].handleList\n        for (let i = 0; i < handleList.length; i++) {\n          const idIndex = this.tempRole.permissionIdList.indexOf(handleList[i].id)\n          if (idIndex > -1) {\n            this.tempRole.permissionIdList.splice(idIndex, 1)\n          }\n        }\n      },\n      /**\n       * 本方法会在勾选状态改变之后触发\n       * @param item 选项\n       * @param index 对应下标\n       */\n      handleChecked(item, index) {\n        if (this.tempRole.permissionIdList.indexOf(item.id) > -1) {\n          // 选中事件\n          // 如果之前未勾选本权限,现在勾选完之后,tempRole里就会包含本id\n          // 那么就要将必选的权限勾上\n          this.makePermissionChecked(index)\n        } else {\n          // 取消选中事件\n          this.cancelAll(index)\n        }\n      },\n      /**\n       * 将角色菜单必选的权限勾上（这里并没有做必选的数据库字段）\n       * @param index 权限对应下标\n       */\n      makePermissionChecked(index) {\n        const handleList = this.allPermission[index].handleList\n        for (let i = 0; i < handleList.length; i++) {\n          this.addUnique(handleList[i].id, this.tempRole.permissionIdList)\n        }\n      },\n      /**\n       * 数组内防重复地添加元素\n       * @param val 值\n       * @param arr 数组\n       */\n      addUnique(val, arr) {\n        const _index = arr.indexOf(val)\n        if (_index < 0) {\n          arr.push(val)\n        }\n      }\n    }\n  }\n</script>\n","import request from '@/utils/request'\n\nexport function list(params) {\n  return request({\n    url: '/role',\n    method: 'get',\n    params\n  })\n}\n\nexport function listResourcePermission(params) {\n  return request({\n    url: '/permission',\n    method: 'get',\n    params\n  })\n}\n\nexport function add(roleForm) {\n  return request({\n    url: '/role',\n    method: 'post',\n    data: roleForm\n  })\n}\n\nexport function update(roleForm) {\n  return request({\n    url: '/role',\n    method: 'put',\n    data: roleForm\n  })\n}\n\nexport function remove(roleId) {\n  return request({\n    url: '/role/' + roleId,\n    method: 'delete'\n  })\n}\n\nexport function updateUserRole(user) {\n  return request({\n    url: '/user/role',\n    method: 'put',\n    data: user\n  })\n}\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6ea6e77d&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}