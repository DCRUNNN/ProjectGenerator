{"version":3,"sources":["webpack:///./src/api/projectPhase.js","webpack:///./src/api/project.js","webpack:///./src/views/phase/index.vue?4b31","webpack:///./src/views/phase/index.vue?3b1f","webpack:///src/views/phase/index.vue","webpack:///./src/views/phase/index.vue","webpack:///./src/api/projectCustomer.js"],"names":["__webpack_require__","d","__webpack_exports__","addProjectPhase","getProjectPhaseList","getProjectPhaseTotal","updatePhase","deletePhase","_utils_request__WEBPACK_IMPORTED_MODULE_0__","projectPhase","request","url","method","data","projectId","params","phaseId","phase","getAllProjects","getProjectById","getProjectDetailById","addProject","updateProject","deleteProject","deleteRateRange","getRateRange","project","rateRangeId","investMoney","a","s","r","o","views_phasevue_type_script_lang_js_","components","computed","watch","newVal","oldVal","this","getInvestCustomersByProjectId","projectName","allProjectList","phaseList","phaseCustomerList","investCustomerList","listLoading","customerListLoading","dialogStatus","dialogFormVisible","btnLoading","readonly","tempPhase","establishTime","payTime","createRules","required","trigger","message","mounted","parseInt","$route","getPhaseByProjectId","getAllProjectList","methods","_this","Object","then","response","_this2","projectCustomer","returnCode","$message","error","_this3","c","getCustomersInPhase","_this4","selectedPhase","filter","item","customerInPhaseList","i","length","customerName","getCustomerName","customerId","find","x","showUpdatePhaseDialog","_this5","$refs","validate","valid","e","success","console","catch","_this6","$confirm","confirmButtonText","cancelButtonText","type","b","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","label","staticStyle","width","filterable","placeholder","on","change","$event","model","value","callback","$$v","expression","_l","key","_v","to","float","size","icon","_e","directives","name","rawName","modifiers","body","row-style","height","cell-style","padding","element-loading-text","border","fit","highlight-current-row","align","sortable","prop","scopedSlots","_u","fn","scope","_s","row","domProps","textContent","hasPermission","nativeOn","click","preventDefault","active","simple","title","mode","index","slot","stripe","min-width","customerIdCard","investTime","rate","effect","visible","update:visible","ref","margin-left","status-icon","label-position","label-width","rules","prefix-icon","auto-complete","$set","value-format","format","resetFields","loading","default","addProjectCustomer","getCustomersInProjectPhase","getCustomerInvestProject"],"mappings":"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","file":"static/js/13.ff7a0008b4b26b19ef9f.js","sourcesContent":["import request from '@/utils/request'\n\nexport function addProjectPhase(projectPhase) {\n  return request({\n    url: '/projectPhase/insert',\n    method: 'post',\n    data: projectPhase\n  })\n}\n\nexport function getProjectPhaseList(projectId) {\n  return request({\n    url: '/projectPhase/getProjectPhaseList',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function getProjectPhaseTotal(projectId) {\n  return request({\n    url: '/projectPhase/getProjectPhaseTotal',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function updatePhase(projectPhase) {\n  return request({\n    url: '/projectPhase/updatePhase',\n    method: 'post',\n    data: projectPhase\n  })\n}\n\nexport function deletePhase(phaseId,projectId,phase) {\n  return request({\n    url: '/projectPhase/deletePhase',\n    method: 'get',\n    params: {phaseId,projectId,phase}\n  })\n}\n","import request from '@/utils/request'\n\nexport function getAllProjects() {\n  return request({\n    url: '/project/getAllProjects',\n    method: 'get'\n  })\n}\n\nexport function getProjectById(projectId) {\n  return request({\n    url: '/project/getProjectById',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function getProjectDetailById(projectId) {\n  return request({\n    url: '/project/getProjectDetailById',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function addProject(project) {\n  return request({\n    url: '/project/insert',\n    method: 'post',\n    data: project\n  })\n}\n\nexport function updateProject(project) {\n  return request({\n    url: '/project/update',\n    method: 'post',\n    data: project\n  })\n}\n\nexport function deleteProject(projectId) {\n  return request({\n    url: '/project/deleteProjectById',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function deleteRateRange(rateRangeId) {\n  return request({\n    url: '/rateRange/deleteRateRange',\n    method: 'get',\n    params: {rateRangeId}\n  })\n}\n\nexport function getRateRange(projectId,investMoney) {\n  return request({\n    url: '/rateRange/getRateRange',\n    method: 'get',\n    params: {projectId,investMoney}\n  })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"filter-container\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form',{staticClass:\"demo-ruleForm\"},[_c('el-form-item',{attrs:{\"label\":\"选择项目\"}},[_c('el-select',{staticStyle:{\"width\":\"50%\"},attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":function($event){return _vm.getPhaseByProjectId()}},model:{value:(_vm.projectId),callback:function ($$v) {_vm.projectId=$$v},expression:\"projectId\"}},_vm._l((_vm.allProjectList),function(item){return _c('el-option',{key:item.projectId,attrs:{\"label\":item.projectName,\"value\":item.projectId}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"期数详情\"}},[_c('router-link',{attrs:{\"to\":'/phase/create/'+this.projectId}},[(this.projectId)?_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"info\",\"size\":\"small\",\"icon\":\"el-icon-plus\"}},[_vm._v(\"新建一期\")]):_vm._e()],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading.body\",value:(_vm.listLoading),expression:\"listLoading\",modifiers:{\"body\":true}}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.phaseList,\"row-style\":{height:0},\"cell-style\":{padding:0},\"element-loading-text\":\"全力加载中...\",\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"期数\",\"align\":\"center\",\"sortable\":\"\",\"prop\":\"phase\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(\"第 \"+_vm._s(scope.row.phase)+\" 期\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"成立时间\",\"align\":\"center\",\"sortable\":\"\",\"prop\":\"establishTime\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{domProps:{\"textContent\":_vm._s(scope.row.establishTime)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"付息时间\",\"align\":\"center\",\"sortable\":\"\",\"prop\":\"payTime\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{domProps:{\"textContent\":_vm._s(scope.row.payTime)}})]}}])}),_vm._v(\" \"),(_vm.hasPermission('phase:update') || _vm.hasPermission('phase:delete'))?_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.hasPermission('phase:update'))?_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-edit-outline circle\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.showUpdatePhaseDialog(scope.row)}}},[_vm._v(\"更新\\n                  \")]):_vm._e(),_vm._v(\" \"),(_vm.hasPermission('phase:delete'))?_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.deletePhase(scope.row.phaseId,scope.row.projectId,scope.row.phase);}}},[_vm._v(\"删除\\n                  \")]):_vm._e()]}}])}):_vm._e()],1)],1)],1),_vm._v(\" \"),(_vm.phaseList && _vm.phaseList.length >0)?_c('div',[_c('el-steps',{attrs:{\"active\":1,\"simple\":\"\"}},[_c('el-step',{attrs:{\"title\":\"项目期数\",\"icon\":\"el-icon-collection-tag\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"该期客户\",\"icon\":\"el-icon-s-custom\"}})],1),_vm._v(\" \"),_c('el-container',[_c('el-aside',{attrs:{\"width\":\"160px\"}},[_c('br'),_vm._v(\" \"),_c('el-menu',{attrs:{\"mode\":\"vertical\"}},_vm._l((_vm.phaseList),function(item,index){return _c('el-menu-item',{key:index,on:{\"click\":function($event){_vm.phase=item.phase;_vm.getCustomersInPhase();}}},[_c('i',{staticClass:\"el-icon-collection-tag\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"第 \"+_vm._s(item.phase)+\" 期\")])])}),1)],1),_vm._v(\" \"),_c('el-main',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading.body\",value:(_vm.customerListLoading),expression:\"customerListLoading\",modifiers:{\"body\":true}}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.phaseCustomerList,\"element-loading-text\":\"全力加载中...\",\"border\":\"\",\"stripe\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"客户姓名\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-s-custom\"}),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s(scope.row.customerName)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"身份证号\",\"min-width\":\"100%\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-document\"}),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s(scope.row.customerIdCard)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"投资金额\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-money\"}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(scope.row.investMoney)+\" 元\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"投资时间\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-time\"}),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s(scope.row.investTime)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"利率\",\"min-width\":\"50%\",\"align\":\"center\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s(scope.row.rate)}})]}}])}),_vm._v(\" \"),(_vm.hasPermission('phase:update') || _vm.hasPermission('phase:delete'))?_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.hasPermission('phase:update'))?_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\"},nativeOn:{\"click\":function($event){$event.preventDefault();}}},[_vm._v(\"删除\\n                    \")]):_vm._e()]}}])}):_vm._e()],1)],1)],1)],1):_c('div',[(!_vm.projectId)?_c('el-tag',{attrs:{\"effect\":\"dark\",\"type\":\"danger\"}},[_vm._v(\"请先选择项目\")]):_c('el-tag',{attrs:{\"effect\":\"dark\",\"type\":\"danger\"}},[_vm._v(\"该项目一期都还没有成立哦\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"更新该期\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"tempPhase\",staticClass:\"small-space\",staticStyle:{\"width\":\"300px\",\"margin-left\":\"50px\"},attrs:{\"status-icon\":\"\",\"label-position\":\"right\",\"label-width\":\"100px\",\"model\":_vm.tempPhase,\"rules\":_vm.createRules}},[_c('el-form-item',{attrs:{\"label\":\"期数\",\"prop\":\"phase\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"prefix-icon\":\"el-icon-info\",\"auto-complete\":\"off\",\"readonly\":true},model:{value:(_vm.tempPhase.phase),callback:function ($$v) {_vm.$set(_vm.tempPhase, \"phase\", $$v)},expression:\"tempPhase.phase\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"成立时间\",\"prop\":\"establishTime\"}},[_c('div',{staticClass:\"block\"},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\",\"value-format\":\"yyyy-MM-dd\",\"format\":\"yyyy-MM-dd\"},model:{value:(_vm.tempPhase.establishTime),callback:function ($$v) {_vm.$set(_vm.tempPhase, \"establishTime\", $$v)},expression:\"tempPhase.establishTime\"}})],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"付款时间\",\"prop\":\"payTime\"}},[_c('div',{staticClass:\"block\"},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\",\"value-format\":\"yyyy-MM-dd\",\"format\":\"yyyy-MM-dd\"},model:{value:(_vm.tempPhase.payTime),callback:function ($$v) {_vm.$set(_vm.tempPhase, \"payTime\", $$v)},expression:\"tempPhase.payTime\"}})],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticStyle:{\"float\":\"left\"},attrs:{\"type\":\"warning\",\"icon\":\"el-icon-error\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"left\"},attrs:{\"type\":\"danger\",\"icon\":\"el-icon-refresh\"},on:{\"click\":function($event){return _vm.$refs['tempPhase'].resetFields()}}},[_vm._v(\"重置\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading,\"icon\":\"el-icon-success\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.updatePhase()}}},[_vm._v(\"更新\\n        \")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form class=\"demo-ruleForm\">\n            <el-form-item label=\"选择项目\">\n              <el-select v-model=\"projectId\" filterable placeholder=\"请选择\"\n                         style=\"width:50%\" @change=\"getPhaseByProjectId()\">\n                <el-option\n                  v-for=\"item in allProjectList\"\n                  :key=\"item.projectId\"\n                  :label=\"item.projectName\"\n                  :value=\"item.projectId\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label=\"期数详情\">\n              <router-link :to=\"'/phase/create/'+this.projectId\">\n                <el-button v-if=\"this.projectId\" style=\"float: right;\" type=\"info\" size=\"small\" icon=\"el-icon-plus\">新建一期</el-button>\n              </router-link>\n              <el-table :data=phaseList\n                        style=\"width:100%\"\n                        :row-style=\"{height:0}\"\n                        :cell-style=\"{padding:0}\"\n                        v-loading.body=\"listLoading\"\n                        element-loading-text=\"全力加载中...\"\n                        border fit highlight-current-row>\n                <el-table-column label=\"期数\" align=\"center\" sortable prop=\"phase\">\n                  <template slot-scope=\"scope\">\n                    <span>第 {{scope.row.phase}} 期</span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"成立时间\" align=\"center\" sortable prop=\"establishTime\">\n                  <template slot-scope=\"scope\">\n                    <span v-text=\"scope.row.establishTime\"></span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"付息时间\" align=\"center\" sortable prop=\"payTime\">\n                  <template slot-scope=\"scope\">\n                    <span v-text=\"scope.row.payTime\"></span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"操作\" align=\"center\"\n                                 v-if=\"hasPermission('phase:update') || hasPermission('phase:delete')\">\n                  <template slot-scope=\"scope\">\n                    <el-button type=\"text\" icon=\"el-icon-edit-outline circle\"\n                               v-if=\"hasPermission('phase:update')\"\n                               @click.native.prevent=\"showUpdatePhaseDialog(scope.row)\">更新\n                    </el-button>\n                    <el-button type=\"text\" icon=\"el-icon-delete\"\n                               v-if=\"hasPermission('phase:delete')\"\n                               @click.native.prevent=\"deletePhase(scope.row.phaseId,scope.row.projectId,scope.row.phase);\">删除\n                    </el-button>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-form-item>\n          </el-form>\n          <div v-if=\"phaseList && phaseList.length >0\">\n            <el-steps :active=\"1\" simple>\n              <el-step title=\"项目期数\" icon=\"el-icon-collection-tag\"></el-step>\n              <el-step title=\"该期客户\" icon=\"el-icon-s-custom\"></el-step>\n            </el-steps>\n            <el-container>\n              <el-aside width=\"160px\">\n                <br>\n                <el-menu mode=\"vertical\">\n                  <el-menu-item @click=\"phase=item.phase;getCustomersInPhase();\" v-for=\"(item,index) in phaseList\" :key=\"index\">\n                    <i class=\"el-icon-collection-tag\"></i>\n                    <span slot=\"title\">第&nbsp;{{item.phase}}&nbsp;期</span>\n                  </el-menu-item>\n                </el-menu>\n              </el-aside>\n              <el-main>\n                <el-table :data=\"phaseCustomerList\"\n                          style=\"width:100%\"\n                          v-loading.body=\"customerListLoading\"\n                          element-loading-text=\"全力加载中...\"\n                          border stripe fit highlight-current-row>\n                  <el-table-column label=\"客户姓名\" align=\"center\" sortable>\n                    <template slot-scope=\"scope\">\n                      <i class=\"el-icon-s-custom\"></i>\n                      <span v-text=\"scope.row.customerName\"></span>\n                    </template>\n                  </el-table-column>\n                  <el-table-column label=\"身份证号\" min-width=\"100%\" align=\"center\" sortable>\n                    <template slot-scope=\"scope\">\n                      <i class=\"el-icon-document\"></i>\n                      <span v-text=\"scope.row.customerIdCard\"></span>\n                    </template>\n                  </el-table-column>\n                  <el-table-column label=\"投资金额\" align=\"center\" sortable>\n                    <template slot-scope=\"scope\">\n                      <i class=\"el-icon-money\"></i>\n                      <span>{{ scope.row.investMoney }} 元</span>\n                    </template>\n                  </el-table-column>\n                  <el-table-column label=\"投资时间\" align=\"center\" sortable>\n                    <template slot-scope=\"scope\">\n                      <i class=\"el-icon-time\"></i>\n                      <span v-text=\"scope.row.investTime\"></span>\n                    </template>\n                  </el-table-column>\n                  <el-table-column label=\"利率\" min-width=\"50%\" align=\"center\" sortable>\n                    <template slot-scope=\"scope\">\n                      <i class=\"el-icon-coin\"></i>\n                      <span v-text=\"scope.row.rate\"></span>\n                    </template>\n                  </el-table-column>\n                  <el-table-column label=\"操作\" align=\"center\"\n                                   v-if=\"hasPermission('phase:update') || hasPermission('phase:delete')\">\n                    <template slot-scope=\"scope\">\n                      <el-button type=\"text\" icon=\"el-icon-delete\"\n                                 v-if=\"hasPermission('phase:update')\"\n                                 @click.native.prevent=\"\">删除\n                      </el-button>\n                    </template>\n                  </el-table-column>\n                </el-table>\n              </el-main>\n            </el-container>\n          </div>\n          <div v-else>\n            <el-tag effect=\"dark\" type=\"danger\" v-if=\"!projectId\">请先选择项目</el-tag>\n            <el-tag effect=\"dark\" type=\"danger\" v-else>该项目一期都还没有成立哦</el-tag>\n          </div>\n        </el-col>\n      </el-row>\n\n      <el-dialog title=\"更新该期\"\n                 :visible.sync=\"dialogFormVisible\">\n        <el-form status-icon class=\"small-space\" label-position=\"right\" label-width=\"100px\" style=\"width: 300px; margin-left:50px;\"\n                 :model=\"tempPhase\"\n                 :rules=\"createRules\"\n                 ref=\"tempPhase\">\n          <el-form-item label=\"期数\" prop=\"phase\">\n            <el-input type=\"text\" prefix-icon=\"el-icon-info\" auto-complete=\"off\"\n                      :readonly=\"true\"\n                      v-model=\"tempPhase.phase\"/>\n          </el-form-item>\n          <el-form-item label=\"成立时间\" prop=\"establishTime\">\n            <div class=\"block\">\n              <el-date-picker\n                v-model=\"tempPhase.establishTime\"\n                type=\"date\"\n                placeholder=\"选择日期\"\n                value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\">\n              </el-date-picker>\n            </div>\n          </el-form-item>\n          <el-form-item label=\"付款时间\" prop=\"payTime\">\n            <div class=\"block\">\n              <el-date-picker\n                v-model=\"tempPhase.payTime\"\n                type=\"date\"\n                placeholder=\"选择日期\"\n                value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\">\n              </el-date-picker>\n            </div>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button type=\"warning\"\n                     style=\"float:left\"\n                     icon=\"el-icon-error\"\n                     @click=\"dialogFormVisible = false\">取消</el-button>\n          <el-button type=\"danger\"\n                     style=\"float:left\"\n                     icon=\"el-icon-refresh\"\n                     @click=\"$refs['tempPhase'].resetFields()\">重置\n          </el-button>\n          <el-button type=\"primary\"\n                     :loading=\"btnLoading\"\n                     icon=\"el-icon-success\"\n                     @click.native.prevent=\"updatePhase()\">更新\n          </el-button>\n        </div>\n      </el-dialog>\n\n    </div>\n  </div>\n</template>\n\n<style scoped>\n\n</style>\n\n<script>\n  import { getAllProjects } from '@/api/project'\n  import { getProjectPhaseList , updatePhase , deletePhase } from '@/api/projectPhase'\n  import { getInvestCustomersByProjectId } from '@/api/projectCustomer';\n\n  export default {\n    components: {  },\n    computed: {\n\n    },\n    watch:{\n      projectId(newVal,oldVal){\n        if(newVal){\n          this.getInvestCustomersByProjectId(newVal)\n        }\n      }\n    },\n    data() {\n      return {\n        projectId: '',\n        projectName:'',\n        phase:'',\n        allProjectList: [],\n        phaseList: [],\n        phaseCustomerList:[], //\n        investCustomerList: [],\n        listLoading: false, // 数据加载等待动画\n        customerListLoading:false,\n        dialogStatus: 'add',\n        dialogFormVisible: false,\n        btnLoading: false, // 按钮等待动画\n        readonly: false, // 只读输入框\n        tempPhase: {\n          phaseId: '',\n          projectId:'',\n          phase:'',\n          establishTime: '',\n          payTime: '',\n        },\n        createRules: {\n          establishTime: [{required: true, trigger: 'blur', message:\"请选择该期成立时间\"}],\n          payTime: [{required: true, trigger: 'blur', message:\"请选择付息时间\"}],\n        }\n      }\n    },\n    mounted() {\n      this.projectId = parseInt(this.$route.params.projectId);\n      if(this.projectId){\n        this.getPhaseByProjectId();\n        this.getAllProjectList();\n      }else{\n        this.projectId = '';\n        this.getAllProjectList();\n      }\n    },\n    methods:{\n      getAllProjectList(){\n        getAllProjects().then(response => {\n          this.allProjectList = response.data\n        })\n      },\n      getInvestCustomersByProjectId(projectId){\n        getInvestCustomersByProjectId(projectId).then(response =>{\n          if (response.returnCode === 200) {\n            this.investCustomerList = response.data\n          }else{\n            this.$message.error(\"获取客户列表失败，请刷新重试\");\n          }\n        })\n      },\n      getPhaseByProjectId(){\n        this.phaseCustomerList = [];\n        this.listLoading = true;\n        this.phase = '';\n        getProjectPhaseList(this.projectId).then(response => {\n          this.phaseList = response.data;\n          this.listLoading = false;\n        })\n      },\n      getCustomersInPhase(){\n        this.customerListLoading = true;\n        const selectedPhase = this.phaseList.filter(item => item.phase === this.phase);\n        this.phaseCustomerList = selectedPhase[0].customerInPhaseList;\n        for (let i = 0; i < this.phaseCustomerList.length; i++) {\n          this.phaseCustomerList[i].customerName = this.getCustomerName(this.phaseCustomerList[i].customerId)\n        }\n        this.customerListLoading = false;\n      },\n      getCustomerName(customerId){\n        let customer = this.investCustomerList.find(function (x) {\n          return x.customerId === customerId\n        });\n        return customer.customerName\n      },\n      showUpdatePhaseDialog(phase) {\n        // 显示更新对话框\n        this.dialogFormVisible = true;\n        this.tempPhase.phaseId = phase.phaseId;\n        this.tempPhase.projectId = phase.projectId;\n        this.tempPhase.phase = phase.phase;\n        this.tempPhase.establishTime = phase.establishTime;\n        this.tempPhase.payTime = phase.payTime;\n      },\n      updatePhase(){\n        this.$refs.tempPhase.validate(valid => {\n          if (valid) {\n            this.btnLoading = true;\n            updatePhase(this.tempPhase).then(response => {\n              if (response.returnCode === 200) {\n                this.$message.success('更新成功!');\n                this.getPhaseByProjectId();\n                this.dialogFormVisible = false;\n                this.btnLoading = false;\n              } else {\n                console.error(response);\n                this.$message.error(response.message);\n                this.getPhaseByProjectId();\n                this.dialogFormVisible = false;\n                this.btnLoading = false;\n              }\n            }).catch(error => {\n              console.error(error);\n              this.$message.error(error.message);\n              this.getPhaseByProjectId();\n              this.dialogFormVisible = false;\n              this.btnLoading = false;\n            })\n          }\n        })\n      },\n      deletePhase(phaseId,projectId,phase) {\n        this.$confirm('您确认要删除该项目的第 ' + phase + ' 期吗?', 'Warning', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          deletePhase(phaseId,projectId,phase).then(response => {\n            if (response.returnCode === 200) {\n              this.$message.success('删除第' + phase + '期成功！');\n              this.getPhaseByProjectId();\n            } else {\n              this.$message.error(response.message)\n              this.getPhaseByProjectId();\n            }\n          })\n        });\n      },\n    }\n  }\n</script>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1e1ecfe3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e1ecfe3\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\nexport function addProjectCustomer(projectCustomer) {\n  return request({\n    url: '/projectCustomer/insert',\n    method: 'post',\n    data: projectCustomer\n  })\n}\n\nexport function getInvestCustomersByProjectId(projectId) {\n  return request({\n    url: '/projectCustomer/getInvestCustomersByProjectId',\n    method: 'get',\n    params: {projectId}\n  })\n}\n\nexport function getCustomersInProjectPhase(projectId,phase) {\n  return request({\n    url: '/projectCustomer/getCustomersInProjectPhase',\n    method: 'get',\n    params: {projectId,phase}\n  })\n}\n\nexport function getCustomerInvestProject(customerId) {\n  return request({\n    url: '/projectCustomer/getCustomerInvestProject',\n    method: 'get',\n    params: {customerId}\n  })\n}\n\n"],"sourceRoot":""}